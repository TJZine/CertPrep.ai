@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Define CSS custom properties for theming */
    --background: 248 250 252;
    --foreground: 15 23 42;
    --primary: 37 99 235;
    --primary-foreground: 255 255 255;
    --muted: 100 116 139;
    --muted-foreground: 71 85 105;
    --border: 203 213 225;
    --input: 226 232 240;
    --ring: 37 99 235;
    --radius: 0.5rem;
  }

  * {
    @apply border-slate-200;
  }

  body {
    @apply bg-slate-50 text-slate-900 antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* CRITICAL: Focus visible styles for accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-blue-600 ring-offset-2;
  }
}

@layer components {
  /* Question display styles */
  .question-text {
    @apply text-lg font-semibold leading-relaxed text-slate-900 sm:text-xl;
  }

  /* Option button states */
  .option-base {
    @apply flex w-full items-center justify-between rounded-lg border bg-white px-4 py-3 text-left text-slate-900 transition;
  }

  .option-default {
    @apply border-slate-200 hover:border-blue-200 hover:bg-blue-50/60;
  }

  .option-selected {
    @apply border-blue-500 bg-blue-50 text-blue-900 hover:border-blue-600;
  }

  .option-correct {
    @apply border-green-500 bg-green-50 text-green-900;
  }

  .option-incorrect {
    @apply border-red-500 bg-red-50 text-red-900;
  }

  /* Card variants */
  .card {
    @apply rounded-xl border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900;
  }

  .card-hover {
    @apply transition hover:-translate-y-0.5 hover:shadow-md;
  }
}

@layer utilities {
  /* Custom scrollbar for sidebars */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: #cbd5e1;
    border-radius: 9999px;
  }

  /**
   * CSP-compliant progress bar width utilities (0-100%)
   * Used by ProgressBar, Scorecard, TopicRadar, WeakAreasCard
   * Pattern: Use data-progress attribute → CSS reads value → applies width
   */
  .progress-fill {
    width: calc(var(--progress-pct, 0) * 1%);
  }

  /* Generate width classes for 0-100% in 1% increments */
  .w-pct-0 { width: 0%; }
  .w-pct-1 { width: 1%; }
  .w-pct-2 { width: 2%; }
  .w-pct-3 { width: 3%; }
  .w-pct-4 { width: 4%; }
  .w-pct-5 { width: 5%; }
  .w-pct-6 { width: 6%; }
  .w-pct-7 { width: 7%; }
  .w-pct-8 { width: 8%; }
  .w-pct-9 { width: 9%; }
  .w-pct-10 { width: 10%; }
  .w-pct-11 { width: 11%; }
  .w-pct-12 { width: 12%; }
  .w-pct-13 { width: 13%; }
  .w-pct-14 { width: 14%; }
  .w-pct-15 { width: 15%; }
  .w-pct-16 { width: 16%; }
  .w-pct-17 { width: 17%; }
  .w-pct-18 { width: 18%; }
  .w-pct-19 { width: 19%; }
  .w-pct-20 { width: 20%; }
  .w-pct-21 { width: 21%; }
  .w-pct-22 { width: 22%; }
  .w-pct-23 { width: 23%; }
  .w-pct-24 { width: 24%; }
  .w-pct-25 { width: 25%; }
  .w-pct-26 { width: 26%; }
  .w-pct-27 { width: 27%; }
  .w-pct-28 { width: 28%; }
  .w-pct-29 { width: 29%; }
  .w-pct-30 { width: 30%; }
  .w-pct-31 { width: 31%; }
  .w-pct-32 { width: 32%; }
  .w-pct-33 { width: 33%; }
  .w-pct-34 { width: 34%; }
  .w-pct-35 { width: 35%; }
  .w-pct-36 { width: 36%; }
  .w-pct-37 { width: 37%; }
  .w-pct-38 { width: 38%; }
  .w-pct-39 { width: 39%; }
  .w-pct-40 { width: 40%; }
  .w-pct-41 { width: 41%; }
  .w-pct-42 { width: 42%; }
  .w-pct-43 { width: 43%; }
  .w-pct-44 { width: 44%; }
  .w-pct-45 { width: 45%; }
  .w-pct-46 { width: 46%; }
  .w-pct-47 { width: 47%; }
  .w-pct-48 { width: 48%; }
  .w-pct-49 { width: 49%; }
  .w-pct-50 { width: 50%; }
  .w-pct-51 { width: 51%; }
  .w-pct-52 { width: 52%; }
  .w-pct-53 { width: 53%; }
  .w-pct-54 { width: 54%; }
  .w-pct-55 { width: 55%; }
  .w-pct-56 { width: 56%; }
  .w-pct-57 { width: 57%; }
  .w-pct-58 { width: 58%; }
  .w-pct-59 { width: 59%; }
  .w-pct-60 { width: 60%; }
  .w-pct-61 { width: 61%; }
  .w-pct-62 { width: 62%; }
  .w-pct-63 { width: 63%; }
  .w-pct-64 { width: 64%; }
  .w-pct-65 { width: 65%; }
  .w-pct-66 { width: 66%; }
  .w-pct-67 { width: 67%; }
  .w-pct-68 { width: 68%; }
  .w-pct-69 { width: 69%; }
  .w-pct-70 { width: 70%; }
  .w-pct-71 { width: 71%; }
  .w-pct-72 { width: 72%; }
  .w-pct-73 { width: 73%; }
  .w-pct-74 { width: 74%; }
  .w-pct-75 { width: 75%; }
  .w-pct-76 { width: 76%; }
  .w-pct-77 { width: 77%; }
  .w-pct-78 { width: 78%; }
  .w-pct-79 { width: 79%; }
  .w-pct-80 { width: 80%; }
  .w-pct-81 { width: 81%; }
  .w-pct-82 { width: 82%; }
  .w-pct-83 { width: 83%; }
  .w-pct-84 { width: 84%; }
  .w-pct-85 { width: 85%; }
  .w-pct-86 { width: 86%; }
  .w-pct-87 { width: 87%; }
  .w-pct-88 { width: 88%; }
  .w-pct-89 { width: 89%; }
  .w-pct-90 { width: 90%; }
  .w-pct-91 { width: 91%; }
  .w-pct-92 { width: 92%; }
  .w-pct-93 { width: 93%; }
  .w-pct-94 { width: 94%; }
  .w-pct-95 { width: 95%; }
  .w-pct-96 { width: 96%; }
  .w-pct-97 { width: 97%; }
  .w-pct-98 { width: 98%; }
  .w-pct-99 { width: 99%; }
  .w-pct-100 { width: 100%; }

  /**
   * Legend color dots for charts (AnalyticsOverview)
   * Maps to Tailwind color palette for CSP compliance
   */
  .legend-dot-green { background-color: #22c55e; }
  .legend-dot-blue { background-color: #3b82f6; }
  .legend-dot-cyan { background-color: #06b6d4; }
  .legend-dot-amber { background-color: #f59e0b; }
  .legend-dot-red { background-color: #ef4444; }
}

@media print {
  body {
    background: white;
    color: #0f172a;
  }

  .no-print {
    display: none !important;
  }

  .print-break {
    page-break-before: always;
  }

  .card,
  .card-hover {
    box-shadow: none !important;
    border-color: #cbd5e1 !important;
  }
}
