version: 2
updates:
  # Maintain dependencies for npm
  - package-ecosystem: "npm"
    directory: "/"
    target-branch: "staging"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 10
    groups:
      # Major updates often have breaking changes - review separately
      major-updates:
        patterns:
          - "*"
        update-types:
          - "major"
      # Minor/patch updates are usually safe to batch together
      routine-updates:
        patterns:
          - "*"
        update-types:
          - "minor"
          - "patch"
    # Ignore unstable major versions that require significant rewrites
    ignore:
      # Tailwind v4 requires full config rewrite (new CSS-first config, PostCSS changes)
      # See: https://tailwindcss.com/docs/v4-beta
      - dependency-name: "tailwindcss"
        versions: [">=4.0.0"]
      # @types/node v22+ drops Node 18 support (we require >=20.9.0 but v22 types are bleeding edge)
      - dependency-name: "@types/node"
        versions: [">=22.0.0"]

  # Maintain dependencies for GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    target-branch: "staging"
    schedule:
      interval: "monthly"
